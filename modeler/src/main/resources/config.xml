<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<beans default-lazy-init="true" default-autowire="no">
    
    <bean id="generator" class="org.symqle.modeler.generator.Generator">
        <property name="codeWriter" ref="codeWriter"/>
        <property name="modelReader" ref="metadataReader"/>
        <property name="transformers">
            <list>
                <ref bean="sieve"/>
                <bean class="org.symqle.modeler.metadata.TableJavaNameAppender"/>
                <bean class="org.symqle.modeler.metadata.ColumnJavaNameAppender"/>
                <bean class="org.symqle.modeler.metadata.ForeignKeyJavaNameAppender"/>
            </list>
        </property>
    </bean>
    
    <bean id="codeWriter" class="org.symqle.modeler.generator.FreeMarkerCodeWriter">
        
    </bean>
    
    <bean id="metadataReader" class="org.symqle.modeler.metadata.MetadataReader">
        <property name="databaseUrl" value="${symqle.modeler.jdbc.url}"/>
        <property name="driverClassName" value="${symqle.modeler.jdbc.driver}"/>
        <property name="user" value="${symqle.modeler.jdbc.user}"/>
        <property name="password" value="${symqle.modeler.jdbc.password}"/>
    </bean>
    
    <bean name="sieve" class="org.symqle.modeler.metadata.Sieve">
        <property name="tableFilters">
            <list>
                <bean class="org.symqle.modeler.transformer.RegexpFilter">
                    <property name="property" value="TABLE_TYPE"/>
                    <property name="pattern" value="ALIAS"/>
                    <property name="matchOutcome" value="DENY"/>

                </bean>
            </list>
        </property>
    </bean>

</beans>
